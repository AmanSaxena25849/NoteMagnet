{% extends "base.html" %}

{% block head %}
  {% load static %}
  <link rel="stylesheet" href="{% static "notes/view_note/view_note.css" %}">
  <script defer src="{% static "notes/view_note/view_note.js" %}"></script>
{% endblock head %}

{% block main %}
  <main>
    <div class="note-container">
      <!-- Note Header -->
      <div class="note-header">
        <h1 class="note-title">{{note.title}}</h1>
        <div class="note-meta">
          <div class="author-info">
            <img src="{{note.author.profile_image.url}}" alt="Author Avatar" class="author-avatar">
            <div class="author-details">
              <span class="author-name">{{note.author.username}}</span>
              <span class="publication-date">Published on {{note.created_at}}</span>
            </div>
          </div>
          {% if user.is_authenticated %}
            {% if user == note.author %}

              <div class="action-buttons">
                <a class="edit-btn"> Edit Note </a>
                <button id="delete-btn" class="delete-btn">Delete Note</button>
              </div>

              <div class="delete-form">
                <div class="heading-pera">
                  <h1>Deleting Note: </h1>
                  <p>How to Master Time Management</p>
                </div>
                <div class="warning-pera">
                  <h3>Warning: </h3>
                  <p>Once deleted note can not be recoverd.</p>
                </div>
                
                <div class="btns">
                  <button class="cancel-btn">Cancel</button>
                  <form action="{% url "delete_note" %}" method="post">
                    {% csrf_token %}
                    <input type="hidden" name="note_id" value="{{ note.id }}">
                    <button  class="delete-btn" type="submit">Delete</button>
                  </form>
                </div>
              </div>
            {% else %}
              <div class="action-buttons">
                <button class="follow-btn">
                  <span class="button-icon">+</span> Follow
                </button>
                <button class="star-btn">
                  <span class="button-icon">â˜…</span> Add to Bookmarks
                </button>
              </div>
            {% endif %}
          {% else %}
          <div class="action-buttons">
            <a href="{% url 'account_login' %}" class="follow-btn">Sign in to Follow</a>
          </div>
          {% endif %}
        </div>
      </div>
      
      <img src="{{note.note_image.url}}" alt="Time Management" class="note-cover-img">
      
      <!-- Note Content -->
      <div class="note-body">
        {{note.content}}
        
        <div class="note-footer">
          <div class="note-tags">
            {% for tag in note.tag.all %}
              <span class="tag">{{tag.tag_name}}</span>
            {% endfor %}
          </div>
        </div>
      </div>
    </div>
    
    <!-- Related Notes Section -->
    <section class="related-notes">
      <div class="note-container">
        <h2>Related Notes</h2>
        <div class="related-cards">
          <!-- Related Note 1 -->
          <div class="note-card">
            <img src="/api/placeholder/400/180" alt="Note Image" class="note-img">
            <div class="note-content">
              <h3 class="note-title">The Ultimate Study Guide</h3>
              <p class="note-desc">Comprehensive study techniques for better learning and retention. Perfect for students and lifelong learners...</p>
              <div class="note-meta">
                <div class="user-info">
                  <img src="/api/placeholder/30/30" alt="User Avatar" class="user-avatar">
                  <span>Mike Chen</span>
                </div>
                <span>1 week ago</span>
              </div>
              <a href="#" class="read-more">Read More</a>
            </div>
          </div>
          
          <!-- Related Note 2 -->
          <div class="note-card">
            <img src="/api/placeholder/400/180" alt="Note Image" class="note-img">
            <div class="note-content">
              <h3 class="note-title">Healthy Morning Routines</h3>
              <p class="note-desc">Start your day right with these science-backed morning habits that boost energy and productivity...</p>
              <div class="note-meta">
                <div class="user-info">
                  <img src="/api/placeholder/30/30" alt="User Avatar" class="user-avatar">
                  <span>Emma Wilson</span>
                </div>
                <span>2 weeks ago</span>
              </div>
              <a href="#" class="read-more">Read More</a>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>
  
{% endblock main %}